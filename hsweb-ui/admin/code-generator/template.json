[{"name":"通用CRUD","comment":"通用增删改查全套生成","id":"simple-gen","script":"//此代码将在初始化配置时执行。用于自定义函数，在模板中调用！\n\nwindow.dataTypeData=[\n    {\"id\":\"VARCHAR\",\"javaType\":\"String\"},\n    {\"id\":\"TINYINT\",\"javaType\":\"Byte\"},\n    {\"id\":\"TIMESTAMP\",\"javaType\":\"java.util.Date\"},\n    {\"id\":\"DATETIME\",\"javaType\":\"java.util.Date\"},\n    {\"id\":\"CLOB\",\"javaType\":\"String\"},\n    {\"id\":\"TEXT\",\"javaType\":\"String\"},\n    {\"id\":\"DECIMAL\",\"javaType\":\"Long\"},\n    {\"id\":\"BIGINT\",\"javaType\":\"Long\"},\n    {\"id\":\"NUMERIC\",\"javaType\":\"Double\"},\n    {\"id\":\"DATE\",\"javaType\":\"Date\"}\n    ];\nvar mapping = {};\n$(window.dataTypeData).each(function(){\n    mapping[this.id]=this.javaType;\n});\nwindow.getJavaType=function(dataType){\n    return mapping[dataType.toUpperCase()];\n}","tables":[{"name":"实体类","var":"properties","type":"grid","columns":[{"name":"column","title":"新建列","header":"列名","expanded":false,"_level":0},{"name":"name","title":"新建列","header":"属性名","expanded":false,"_level":0},{"name":"dataType","title":"新建列","header":"数据类型","editor":"{\"textField\":\"id\",\"type\":\"combobox\",\"data\":\"dataTypeData\"}","expanded":false,"_level":0},{"name":"javaType","title":"新建列","header":"java类型","renderer":"if(!value&&row.dataType){row.javaType=getJavaType(row.dataType) ;console.log(row.javaType)}return row.javaType;","expanded":false,"_level":0},{"name":"comment","title":"新建列","header":"说明","expanded":false,"_level":0}],"_id":28,"_uid":28}],"vars":[{"var":"groupId","name":"groupId","expanded":false,"_level":0,"pid":-1,"_id":29,"_uid":29,"_pid":-1},{"var":"version","name":"version","expanded":false,"_level":0,"pid":-1,"_id":30,"_uid":30,"_pid":-1},{"var":"parentModule","name":"父maven模块","expanded":false,"_level":0,"pid":-1,"children":[],"_id":31,"_uid":31,"_pid":-1},{"name":"maven模块名称","var":"moduleFile","expanded":false,"_level":0,"children":[],"_id":32,"_uid":32,"_pid":-1},{"name":"包名","var":"packageName","expanded":false,"_level":0,"children":[],"pid":-1,"_id":33,"_uid":33,"_pid":-1},{"var":"module","name":"模块","expanded":false,"_level":0,"pid":-1,"_id":34,"_uid":34,"_pid":-1},{"var":"tableName","name":"表名","_level":0,"pid":-1,"expanded":false,"_id":35,"_uid":35,"_pid":-1},{"name":"类名","var":"entityName","expanded":false,"_level":0,"pid":-1,"children":[],"_id":36,"_uid":36,"_pid":-1},{"var":"requestMapping","name":"请求路径","expanded":false,"_level":0,"_id":37,"_uid":37,"_pid":-1},{"var":"permission","name":"权限ID","expanded":false,"_level":0,"children":[],"_id":38,"_uid":38,"_pid":-1},{"name":"说明","var":"comment","expanded":false,"_level":0,"pid":-1,"children":[],"_id":39,"_uid":39,"_pid":-1},{"var":"api-comment`","name":"API-接口说明","_level":0,"expanded":false,"_id":40,"_uid":40,"_pid":-1}],"templates":[{"name":"module","file":"{{moduleFile}}","type":"dir","children":[{"name":"module-api","file":"{{moduleFile}}-api","type":"dir","_level":1,"parentId":1,"repeat":"append","children":[{"name":"src/main/java","file":"src/main/java","type":"dir","_level":2,"repeat":"ignore","children":[{"name":"package/api","file":"{{$imports.string.package2path(packageName)}}/api","type":"dir","_level":3,"repeat":"ignore","children":[{"name":"entity","file":"entity","type":"dir","_level":4,"repeat":"ignore","children":[{"name":"Entity.java","file":"{{entityName}}.java","type":"file","template":"package {{packageName}}.api.entity;\nimport org.hswebframework.web.commons.entity.SimpleGenericEntity;\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.*;\n\nimport java.util.List;\n\n/**\n* {{comment}}\n* @author hsweb-generator3.0\n*/\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@ApiModel(description = \"{{comment}}\")\npublic class {{entityName}} extends SimpleGenericEntity<String> {\n    {{each properties property i}}{{if property.name!='id'}}\n    @ApiModelProperty(value = \"{{property.comment}}\")\n    private {{property.javaType}} {{property.name}};\n    {{/if}}{{/each}}\n}","_level":5,"repeat":"replace","expanded":true,"_id":6,"_uid":6,"_pid":5}],"expanded":true,"parentId":32,"_id":5,"_uid":5,"_pid":4},{"name":"service","file":"service","type":"dir","_level":4,"repeat":"ignore","children":[{"name":"Service.java","file":"{{entityName}}Service.java","type":"file","template":"package {{packageName}}.api.service;\n\nimport {{packageName}}.api.entity.{{entityName}};\nimport org.hswebframework.web.service.CrudService;\n\n/**\n * {{comment}}\n *\n * @author hsweb-generator 3.0\n */\npublic interface {{entityName}}Service extends CrudService<{{entityName}}, String> {\n\n}\n","_level":5,"repeat":"ignore","expanded":true,"_id":8,"_uid":8,"_pid":7}],"expanded":true,"parentId":32,"_id":7,"_uid":7,"_pid":4}],"expanded":true,"_id":4,"_uid":4,"_pid":3}],"expanded":true,"_id":3,"_uid":3,"_pid":2},{"name":"pom.xml","file":"pom.xml","type":"file","template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <parent>\n        <artifactId>{{moduleFile}}</artifactId>\n        <groupId>{{groupId}}</groupId>\n        <version>{{version}}</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>{{moduleFile}}-api</artifactId>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.hswebframework.web</groupId>\n            <artifactId>hsweb-commons-entity</artifactId>\n            <version>${hsweb.framework.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.hswebframework.web</groupId>\n            <artifactId>hsweb-commons-service-api</artifactId>\n            <version>${hsweb.framework.version}</version>\n        </dependency>\n    </dependencies>\n\n</project>","_level":2,"repeat":"ignore","parentId":2,"expanded":true,"_id":9,"_uid":9,"_pid":2}],"expanded":true,"_id":2,"_uid":2,"_pid":1},{"name":"module-local","file":"{{moduleFile}}-local","type":"dir","_level":1,"parentId":1,"repeat":"append","children":[{"name":"src/main","file":"src/main","type":"dir","_level":2,"parentId":7,"repeat":"ignore","children":[{"name":"java","file":"java","type":"dir","_level":3,"repeat":"ignore","children":[{"name":"package/impl","file":"{{$imports.string.package2path(packageName)}}/impl","type":"dir","_level":4,"repeat":"ignore","children":[{"name":"dao","file":"dao","type":"dir","_level":5,"repeat":"append","parentId":25,"children":[{"name":"Dao.java","file":"{{entityName}}Dao.java","type":"file","template":"package {{packageName}}.impl.dao;\n\nimport org.hswebframework.web.dao.CrudDao;\nimport {{packageName}}.api.entity.{{entityName}};\n\n/**\n*  {{comment}}\n*  @author hsweb-generator3.0\n */\npublic interface {{entityName}}Dao extends CrudDao<{{entityName}},String> {\n}\n","_level":6,"repeat":"ignore","expanded":true,"_id":15,"_uid":15,"_pid":14}],"expanded":true,"_id":14,"_uid":14,"_pid":13},{"name":"service","file":"service","type":"dir","_level":5,"repeat":"append","parentId":25,"children":[{"name":"ServiceImpl.java","file":"Local{{entityName}}ServiceImpl.java","type":"file","template":"package {{packageName}}.impl.service;\n\nimport {{packageName}}.api.entity.{{entityName}};\nimport {{packageName}}.api.service.{{entityName}}Service;\nimport {{packageName}}.impl.dao.{{entityName}}Dao;\nimport org.hswebframework.web.service.GenericEntityService;\nimport org.hswebframework.web.id.IDGenerator;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n/**\n * 默认的服务实现\n *\n * @author hsweb-generator3.0\n */\n@Service(\"{{$imports.string.lowFirst(entityName)}}Service\")\npublic class Local{{entityName}}ServiceImpl extends GenericEntityService<{{entityName}}, String> implements {{entityName}}Service {\n            \n    @Autowired\n    private {{entityName}}Dao {{$imports.string.lowFirst(entityName)}}Dao;\n    \n    @Override\n    protected IDGenerator<String> getIDGenerator() {\n        return IDGenerator.MD5;\n    }\n    \n    @Override\n    public {{entityName}}Dao getDao() {\n        return {{$imports.string.lowFirst(entityName)}}Dao;\n    }\n\n}\n","_level":6,"repeat":"ignore","expanded":true,"_id":17,"_uid":17,"_pid":16}],"expanded":true,"_id":16,"_uid":16,"_pid":13}],"expanded":true,"_id":13,"_uid":13,"_pid":12}],"expanded":true,"_id":12,"_uid":12,"_pid":11},{"name":"resources","file":"resources","type":"dir","_level":3,"repeat":"append","children":[{"name":"mappers","file":"{{$imports.string.package2path(packageName)}}/dao/myabtis","type":"dir","_level":4,"repeat":"append","children":[{"name":"Mapper.xml","file":"{{entityName}}Mapper.xml","type":"file","template":"<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://www.mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"{{packageName}}.impl.dao.{{entityName}}Dao\">\n    <resultMap id=\"{{entityName}}ResultMap\" type=\"{{packageName}}.api.entity.{{entityName}}\">\n    {{each properties property i}}{{if property.name=='id'}}\n        <id property=\"id\" column=\"id\" javaType=\"string\" jdbcType=\"VARCHAR\"/>{{else}}\n        <result property=\"{{property.name}}\" column=\"{{property.column}}\" javaType=\"{{property.javaType}}\" jdbcType=\"{{property.dataType}}\"/>{{/if}}{{/each}}\n    </resultMap>\n\n    <!--用于动态生成sql所需的配置-->\n    <sql id=\"config\">\n        <bind name=\"resultMapId\" value=\"'{{entityName}}ResultMap'\"/>\n        <bind name=\"tableName\" value=\"'{{tableName}}'\"/>\n    </sql>\n  \n    <insert id=\"insert\" parameterType=\"{{packageName}}.api.entity.{{entityName}}\" >\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildInsertSql\"/>\n    </insert>\n\n    <delete id=\"deleteByPk\" parameterType=\"String\">\n        delete from {{tableName}} where id =#{id}\n    </delete>\n\n    <delete id=\"delete\" parameterType=\"org.hswebframework.web.commons.entity.Entity\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildDeleteSql\"/>\n    </delete>\n\n    <update id=\"update\" parameterType=\"org.hswebframework.web.commons.entity.Entity\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildUpdateSql\"/>\n    </update>\n\n    <select id=\"query\" parameterType=\"org.hswebframework.web.commons.entity.Entity\" resultMap=\"{{entityName}}ResultMap\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildSelectSql\"/>\n    </select>\n\n    <select id=\"count\" parameterType=\"org.hswebframework.web.commons.entity.Entity\" resultType=\"int\">\n        <include refid=\"config\"/>\n        <include refid=\"BasicMapper.buildTotalSql\"/>\n    </select>\n</mapper>\n","_level":5,"repeat":"replace","expanded":true,"_id":20,"_uid":20,"_pid":19}],"expanded":true,"_id":19,"_uid":19,"_pid":18}],"expanded":true,"_id":18,"_uid":18,"_pid":11}],"expanded":true,"_id":11,"_uid":11,"_pid":10},{"name":"pom.xml","file":"pom.xml","type":"file","template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n   <parent>\n        <artifactId>{{moduleFile}}</artifactId>\n        <groupId>{{groupId}}</groupId>\n        <version>{{version}}</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>{{moduleFile}}-local</artifactId>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.hswebframework.web</groupId>\n            <artifactId>hsweb-commons-dao-mybatis</artifactId>\n            <version>${hsweb.framework.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.hswebframework.web</groupId>\n            <artifactId>hsweb-commons-service-simple</artifactId>\n            <version>${hsweb.framework.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>{{groupId}}</groupId>\n            <artifactId>{{moduleFile}}-api</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n    </dependencies>\n</project>","_level":2,"repeat":"ignore","children":[],"expanded":true,"_id":21,"_uid":21,"_pid":10}],"expanded":true,"_id":10,"_uid":10,"_pid":1},{"name":"module-web","file":"{{moduleFile}}-web","type":"dir","_level":1,"parentId":1,"repeat":"ignore","expanded":true,"children":[{"name":"src/java","file":"src/java","type":"dir","_level":2,"parentId":8,"repeat":"ignore","children":[{"name":"controller","file":"{{$imports.string.package2path(packageName)}}/controller","type":"dir","_level":3,"repeat":"ignore","children":[{"name":"Controller.java","file":"{{entityName}}Controller.java","type":"file","template":"package {{packageName}}.controller;\n\nimport io.swagger.annotations.Api;\nimport org.hswebframework.web.authorization.annotation.Authorize;\nimport org.hswebframework.web.commons.entity.param.QueryParamEntity;\nimport org.hswebframework.web.controller.SimpleGenericEntityController;\nimport {{packageName}}.api.entity.{{entityName}};\nimport {{packageName}}.api.service.{{entityName}}Service;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n/**\n * {{comment}}\n * @author hsweb-generator3.0\n */\n@RestController\n@RequestMapping(\"{{requestMapping}}\")\n@Authorize(permission = \"{{permission}}\",description=\"{{comment}}\")\n@Api(tags = \"{{api-comment}}\",value=\"{{comment}}\")\npublic class {{entityName}}Controller implements SimpleGenericEntityController<{{entityName}}, String, QueryParamEntity> {\n\n    private {{entityName}}Service {{$imports.string.lowFirst(entityName)}}Service;\n  \n    @Autowired\n    public void set{{entityName}}Service({{entityName}}Service {{$imports.string.lowFirst(entityName)}}Service) {\n        this.{{$imports.string.lowFirst(entityName)}}Service = {{$imports.string.lowFirst(entityName)}}Service;\n    }\n  \n    @Override\n    public {{entityName}}Service getService() {\n        return {{$imports.string.lowFirst(entityName)}}Service;\n    }\n}\n","_level":4,"repeat":"ignore","expanded":true,"_id":25,"_uid":25,"_pid":24}],"expanded":true,"_id":24,"_uid":24,"_pid":23}],"expanded":true,"_id":23,"_uid":23,"_pid":22},{"name":"pom.xml","file":"pom.xml","type":"file","template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <parent>\n        <artifactId>{{moduleFile}}</artifactId>\n        <groupId>{{groupId}}</groupId>\n        <version>{{version}}</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>{{moduleFile}}-web</artifactId>\n\n    <dependencies>\n        <dependency>\n            <groupId>javax.servlet</groupId>\n            <artifactId>servlet-api</artifactId>\n            <version>2.5</version>\n            <optional>true</optional>\n        </dependency>\n        <dependency>\n            <groupId>{{groupId}}</groupId>\n            <artifactId>{{moduleFile}}-api</artifactId>\n            <version>${project.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.hswebframework.web</groupId>\n            <artifactId>hsweb-commons-controller</artifactId>\n            <version>${hsweb.framework.version}</version>\n        </dependency>\n    </dependencies>\n</project>","_level":2,"repeat":"ignore","children":[],"expanded":true,"_id":26,"_uid":26,"_pid":22}],"_id":22,"_uid":22,"_pid":1},{"name":"pom.xml","file":"pom.xml","type":"file","template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <parent>\n        <artifactId>{{parentModule}}</artifactId>\n        <groupId>{{groupId}}</groupId>\n        <version>{{version}}</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>{{moduleFile}}</artifactId>\n    <packaging>pom</packaging>\n    <modules>\n        <module>{{moduleFile}}-api</module>\n        <module>{{moduleFile}}-local</module>\n        <module>{{moduleFile}}-web</module>\n    </modules>\n</project>","_level":1,"repeat":"ignore","expanded":true,"_id":27,"_uid":27,"_pid":1}],"expanded":true,"_level":0,"repeat":"ignore","_id":1,"_uid":1,"_pid":-1}]}]